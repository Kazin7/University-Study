정보보호 용어
기밀성(TLS,IPSec)
-허락되지 않은 사용자가 정보를 알수 없도록함

무결성
-허락되지 않은 사용자가 정보를 함부로 수정 할 수 없도록 함

가용성
-데이터 백업(데이터의 중복성 유지)
-서버 증설을 위한 접속 트래픽 최대 허용량 확대
-KISA 사이버 대피소(DNS정보 변경을 통한 네트워크 통신 안정화
-허락된 사용자가 정보에 접근 할때 방해받지 않도록 함

인증
-허락된 사용자인지 아닌지 구분함

책임성
-사고 발생시 원인 파악 및 추적이 가능해야함

네트워크
-모뎀이나 LAN,케이블,무선매체 등 통신설비를 갖춘 컴퓨터를 통해 서로 연결하는 조직이나 체계 또는 통신망을 뜻함
-즉 통신설비들로 두 개 이상의 컴퓨터를 연결한 것

다수의 컴퓨터를 한개의 네트워크에 연결했을때 이점
-데이터 공유가 쉽다.
-컴퓨터 관리가 쉽다.
-여러모로 편의성이 향상된다.

LAN(근거리 통신망)
-가까운 거리에 있는 네트워크 장비들을 연결,접속하여 통신할수 있도록 구성한 네트워크 시스템
특징
-범위가 좁고, 그로 인해 전송지연시간이 적고, 통신품질이 우수하다.
-네트워크 기기에 상관없이 통신이 가능
-보안을 지키기 쉬워짐.

WAN(광역 통신망)
-두 개이상의 LAN이 넓은 지역에 걸쳐 연결되어 있는것
-예로 인터넷이 있다.

유니캐스트
-서버와 클라이언트 사이의 1:1 통신방식을 의미
-자신의 MAC주소와 수신지의 MAC주소가 동일하면 데이터를 수신한다.

브로드캐스트
-로컬 LAN에 있는 모든 네트워크 단말기에 데이터를 보내는 방식
-서버와 클라이언트의 1:N 통신 방식을 의미
-브로드캐스트의 주소는 FF-FF-FF-FF-FF-FF로 고정
-불특정 다수에게 전송되기 때문에 네트워크 성능 저하를 일으킬수도있음

멀티캐스트
-특정 그룹에게만 전송된다.

프로토콜의 3가지 요소**
구문 : 데이터의 구조나 포맷을 의미
의미 : 전송되는 데이터의 각 부분이 무엇을 뜻하는지를 알수 있게 미리 정해둔 규칙
순서 : 어떤 데이터를 보낼 것인지와 얼마나 빠르게 데이터를 보낼것인지 정의

프로토콜의 기능
순서,흐름,오류 제어,동기화


OSI7계층
==========================================================
물리
-실제 장치를 연결하는데 필요한 물리적 세부사항을 정의
-데이터 링크에서 프레임을 받아 전기적 신호로 변환하여 수신측에 보낸다.
-리피터 : 불분명한 신호 세기를 다시 증가시켜 네트워크를 연장시킴
-허브 : 스위치의 과거 형태로 패킷을 모든 곳에 똑같이 복사해서 보낸다,연결이 많을수록 충돌 증가

데이터 링크
-물리적 링크(MAC)를 이용하여 신뢰성 있는 전송을 보장
-비트를 프레임이라는 논리적 단위로 구성한다.
-네트워크 계층에서 받은 패킷을 프레임으로 구성하여 물리 계층으로 전달한다.
-이더넷 -> 프로토콜,데이터 크기는 1500byte가 최대이다.
-브리지 : LAN과 LAN을 연결하는 초기의 네트워크 장치로 한 네트워크에서 다음 네트워크로 데이터 프레임을 복사한다.
-스위치
1.컷스루 방식 : 수신한 프레임의 목적지 주소를 확인하고 그 포트로 즉시 전송하여 지연시간 최소화
2.저장후 전송방식 : 전체 프레임을 수신하고 버퍼에 보관한다음 오류를 확인하고 목적지 포트로 전송,속도가 다른 포트를 연결시 사용

네트워크
-LAN이외의 통신을 하기 위해 IP주소를 사용한다.
-라우팅 프로토콜을 사용하여 최적의 경로를 고른다
-데이터를 패킷 단위로 분할하여 전송한다.
-라우터 : 게이트웨이라고도 하고, 논리적으로 분리된 두개 이상의 네트워크를 연결,
로컬 네트워크에서 브로드캐스트를 차단하여 네트워크를 분리

정적 라우팅**
-특정 경로로만 패킷이 지나가도록 설정, 변경사항이 생길시 수동으로 변경

동적 라우팅**
-네트워크 상태를 스스로 파악하여 최적의 경로로 전송, 변경사항이 생길 시 자동으로 해결

ARP프로토콜
-데이터를 전달하려는 IP주소와 통신에 필요한 물리적인 주소를 알아내는 프로토콜
-브로드 캐스트 한후, 그 대상에게서 유니캐스트를 받는다.

ICMP
-호스트 서버와 인터넷 게이트웨이 사이에서 메시지를 제어 및 오류를 알려줌
-ping

IGMP
-멀티캐스트에 관여하는 프로토콜로 멀티캐스트 그룹을 관리한다.

전송
-시스템 간에 신외성 있는 데이터를 주고 받을 수 있게 함,오류 복구와 흐름 제어를 담당
-수신지 컴퓨터까지 전송하려면 ip,mac외에 포트도 필요하다.

TCP
-연결 지향형 프로토콜,높은 신뢰성 ,Three way hand shaking

UDP
-비연결 지향형 프로토콜,신뢰성이 없어 수신한 데이터의 무결성을 보장하지 못한다.네트워크에 부하가 적다.

포트 번호
FTP : 21
Telnet : 23
HTTP : 80
POP3 : 110
DNS : 53
IMAP : 143
TLS : 443
SSH : 22

세션
-응용 프로세스가 통신을 관리하기 위한 방법 제공,동기화

표현
-시스템에서 사용되는 코드 간의 번역을 담당,데이터 형식을 규정

응용
-사용자나 응용 프로그램 사이에 데이터 교환을 가능하게 하는 계층

FTP
-파일 전송을 위한 기본적인 프로토콜

Telnet
-사용자가 원격에 있는 서버에 로그인 하도록 TCP연결 설정

POP3 & IMAP
-메일 서버로 전송된 메일을 확인할때 사용
-POP3와 기본적으로 같지만 메일을 읽은 후 메일이 서버에 남는다.

SMTP
-메일 서비스

DNS
-도메인 이름 주소를 통해 IP 주소를 확인 가능한 프로토콜

TFTP
-파일을 전송하는 프로토콜
-UDP 패킷을 사용하고, 인증 기능을 제공하지 않음.

HTTP
-인터넷을 위해 사용하는 기본적인 프로토콜

==========================================================
TCP/IP
네트워크 인터페이스
인터넷
전송
응용


OSI vs TCP/IP
1.OSI는 개념적인 모델이다.
2.TCP/IP에는 세션,표현계층이 없다.
3.실질적인 통신을 TCP/IP가 한다.

Link encryption
-각 링크마다 암호화가 진행되고 링크 사이의 공유된 암호화 키가 필요함

End-to-End encryption
-암호화가 source 와 destination에서 이루어짐
-헤더 부분이 암호화가 되지 않으므로 트래픽 흐름이 노출된다.

해시함수의 조건
1.프리이미지 저항성 : 해시 값으로 데이터를 찾는 것이 어려워야한다.
2.제2 프리이미지 저항성 : 해시 값이 같은 또다른 데이터를 찾는 것이 어려워야한다.
3.충돌 저항성 : 동일한 해시 값을 가지는 두 데이터를 찾는 것이 어려워야 한다.

MAC
-해시 알고리즘으로 정상 메시지의 수정 또는 변경을 검출할 수 있도록 덧 붙이는 코드
-거짓 행세를 검출하는 것이 불가하여 인증이 필요하게 된다.

전자 서명
-인증
-메시지 무결성
-부인방지
-전자 서명 알고리즘의 종류

암호화 알고리즘 E
평문 m
암호문 c
암호화 키 k1
Ek1(m) = c

복호화 알고리즘 D
복호화 키 k1
Dk2(c) = m

암호화키 = 복호화키 => 대칭키 알고리즘
암호화키 != 복호화키 => 비대칭키 알고리즘, 공개키 알고리즘

대칭키 알고리즘(AES)
-서로 연결되는 사람마다 키가 존재해야 되고 송신자나 수신자의 부인방지가 불가하다.

공개키 알고리즘(RSA)
-공개키와 개인키가 따로 있고, 공개키는 모두에게 공개하고 개인키는 비밀로 보관한다.
-부인방지 기능

하이브리드 암호 시스템
-대칭키 알고리즘을 이용하여 문서를 암호화하고 그 대칭키를 공개키를 이용하여 암호화 한다음 전송하는 방법

TLS
-클라이언트와 서버 사이의 통신과정에서 메시지 인증과 메시지 기밀성을 제공한다.

Handshake protocol
-클라이언트 서버간 세션에 사용할 보안 알고리즘을 협의한다
-서버가 인증서와 교환 메시지를 전송한다, 완료시 클라이언트는 인증서를 통해 서버를 인증하고 서버의 공개키를 알게된다.
-서버가 클라이언트를 인증, 서버와 클라리언트는 pre-master secret공유
-클라이언트와 서버는 암호 알고리즘과 보안 파라미터 값을 변경하는 메시지를 주고받음

ChangeCipherSpec protocol
-교환된 ChangeCipherSpec에 대하여 확인하는 과정, 암호화,인증,압축알고리즘 확인

Alert protocol
-시스템이 비정상적으로 동작하였을때 에러처리를 하기 위하여 에러/경고 메시지를 정의하여 사용한다.

Record protocol
-상위계층들을 모두 공통된 형식으로 구조화 시킴

SSH
-네트워크 상의 다른 컴퓨터에 로그인 하거나 원격 시스템에서 명령을 실행한다.

IPSec
-SSL과 달리 네트워크 계층에서 보안을 제공한다.

IP header > TCP header > HTTP header

전송모드
-IPSec의 기본 모드로 종단간 보안을 제공, IP데이터 영역만 보호, IP헤더는 보호되지 않는다.

App		Data
Transport		Transport header | Data
IPSec		IPsec header |Transport payload | IPSec trailer
Network		IP header | IPSec Payload

터널모드
-IP데이터,헤드 영역 모두 보호하는 방식, 트래픽 흐름 보호가 가능하다.


App		Data
Transport		Transport header | Data
Network		IP header | Transport payload
IPSec		IPsec header | IP payload | IPSec trailer
Network		New IP header | IPSec Payload

IPSec 두개의 보안 프로토콜
-AH : IP 패킷 객체 인증과 데이터영역의 무결성을 제공한다. 기밀성은 제공하지 않는다.
-AH with tunnel : IP패킷의 모든 부분에 무결성을 제공한다, 새로운 IP헤더가 만들어진다.**
-ESP : P 패킷 객체 인증과 데이터영역의 무결성을 제공한다. 기밀성도 제공한다.

VPN : 가상 사설망
G to G VPN : 본사,지사 별로 VPN장비간에 터널을 제공하는 방식
ESP with 터널모드를 통해 구현된다. 서비스를 이용할때 애플리케이션이나 설정이 필요 없다.

G to C VPN : VPN장비와 사용자의 PC간에 터널을 제공하는 방식

IPSec VPN
-네트워크 계층
-상위 계층 프로토콜 모두 지원
-G to G에 적합
-설치 및 관리가 부담
-SSL VPN에 비해 빠른속도

SSL VPN
-전송 계층
-지원 가능한 프로토콜이 적음
-G to C에 적합
-설치 및 관리가 부담이 적다
-느리다

VPN을 사용하지 않으면 공격자가 사용자가 어디에 접속했는지 알수있다.***VVVVVVV
사용시, 공격자는 트래픽 흐름을 분석할수없지만, VPN서버는 트래픽 플로우를 분석할수있다.

데이터링크와 가장 관계가 깊은 보안 시스템 : L2 방화벽**
-최소 두개 이상의 NIC카드가 필요하다.

L2방화벽의 장점**
-내/외부에서 방화벽이 보이지 않는다.

L2방화벽의 단점**
-동일한 네트워크 안에서만 가능하기 때문에 다양한 네트워크 환경에 적용할수 없다.

VLAN
-물리적 배치와 상관없이 논리적으로 LAN을 구성할 수 있는 기술

L3방화벽의 장점**
-L2와 다르게 NAT과 VLAN을 통해 다양한 설정의 접근제어가 가능하다.

L3방화벽의 단점**
-Transparent하지 않으므로 방화벽의 존재가 유추 가능하다. 일반적으로는 네트워크 디자인을 바꾸어야 할 수도있음.

L7 방화벽에서는 패킷 페이로드를 활용하여 운용할 수 있음.

L2 MAC정보를 보고 스위칭을 수행함		MAC 테이블**
L3 IP 주소 정보를 보고 스위칭을 진행함	라우팅 테이블**
L4 IP주소 + 포트를 보고 스위칭을 진행함	세션 또는 연결**
L7 애플리케이션 데이터를 보고 스위칭을 진행함	Contents**

방화벽을 NAT모드로 설치할경우 L4까지 커버 가능
TP모드로 설치할 경우 L2까지 커버 가능

IPS/IDS
-L7까지 커버가능

웹방화벽/프록시
-L7까지 커버가능
-프록시 : 악성사이트에 접근 할 수 없도록 위험한 사이트를 차단하는 역할

1세대 방화벽**
-룰관리 이슈, 많은 포트를 여는 문제점

2세대 방화벽**
-Stateful Inspection을 수행한다.
-자동적으로 들어오는 패킷들에 대해 룰이 추가되고 나가면 룰이 제거된다.

Stateful Inspection
-보안성이 향상되고 룰 관리가 쉬워진다.

3세대 방화벽**
-구체성을 가지고 포트 안에서도 사용하는 애플리케이션에 따라 룰을 만들 수 있다.

NAT**
-공인 ip주소를 기반으로 내부 내트워크에 1개 이상의 ip주소를 할당하여 ip주소및 포트 번호를 매핑,변환해주는 기술
-악성코드가 퍼졌을때 원인이 되는 서버를 찾는 것이 어려움

공인 IP주소
사설 IP주소

DNAT
-외부에서 내부로 들어올때 변환

SNAT
-내부에서 외부로 접속할때 변환

HA
-2대의 방화벽을 사용하여 1개의 방화벽에 문제가 생겼을 경우를 대비

AS
-1대는 온라인 상태, 1대는 대기 상태로 둔다. 두개는 동기화가 되어있어야한다.

AA
-2대의 방화벽 모두 온라인 상태이고, 트래픽을 좀 더 여유있는 방화벽쪽으로 트래픽을 전달한다.

바이패스 스위치**
-방화벽 장비에 장애가 생길경우, 우회경로를 만들어주는 방법

Full Mesh**
-네트워크 장비를 2대이상 준비하고 모두 연결하는 방법
==================================
IPS
-L7계층을 커버할 수 있어야 한다
-DDos를 막을 수 있어야 한다.
-트래픽을 학습 할 수 있어야한다.
-방화벽 다음에 설치한다

Signature 기반 탐지
-일정한 공격패턴을 룰에 추가해서 공격을 탐지, unknown공격은 탐지를 못한다.

Anomaly 기반 탐지**
-일반적인 상황의 트래픽을 학습하고, 비정상적인 트래픽이 발생하면 공격으로 간주한다, 오탐의 가능성이 존재한다.

=============================================

NIDS
-네트워크 인프라를 관리할 수 있는 위치에서 작동하는 IDS
-호스트마다 설치하지 않아도 되고 네트워크 전체를 한군데서 분석가능
-서버 로컬에서 침해시 알수 없다.
-전체 네트워크 패킷이 필요하다.

HIDS
-Host에서 작동하며 Host의 상황을 관리하는 IDS
-Host별 상세 분석이 가능하다
-개별로 설치 및 관리해야하고, Host감염시 제대로 동작하지 않는다.
-호스트 네트워크 패킷, 시스템 로그가 필요하다.

포트미러링**
-스위치 포트를 통과하는 패킷들을 관리하기 위하여 패킷들을 다른 스위치 포트로 복사하는 방법.

SPAN 기반 IDS**
-통신량 증가시 제대로SPAN이 안되어 패킷이 유실될 수 있다.

TAP 기반 IDS**
-WAN을 통해 공인 IP만 보이기 때문에 따로 모든 PC조사가 필요하다.

IDS의 위치**
-일반적으로 네트워크가 분리되는 지점에 설치한다.

WhoisVVVVVVV
-도메인 확인 , 도메인과 관련된 사람 및 인터넷 자원을 찾기위한 프로토콜

Host파일
-DNS존재 이전에 사용했고, 운영체제가 호스트 이름을 IP주소에 매칭할때 사용하는 파일
-보통은 비어있고, DNS서버가 작동하지 않거나 별도의 네트워크를 구성하여 사용할때 사용한다.

스캐닝VVVVVVV
-스캔 : 서버의 작동여부와 서버가 제공하는 서비스를 확인하기 위한 작업

ping
-네트워크와 시스템이 정상적으로 작동하는지 확인하기 위한 간단한 유틸리티 ICMP를 사용한다.

ICMP스캔
-공격 대상 시스템의 활성화 여부를 알아보는 방법
-일반적으로 Echo Request와 Echo Reply를 사용한다.

TCP Open 스캔
-Syn , Syn+ACK , ACK 로 수행하고 가장 기본적인 스캔

스텔스 스캔
-로그를 남기지 않는 것만이 아니라, 공격 대상을 속이고 자신의 위치를 숨기는 스캔 모두를 말한다.
-Syn , Syn+ACK , RST

UDP 스캔
-열려있는 경우 아무응답이 없고, 포트가 닫힌 경우에만 Unreachable 패킷을 보내준다.

스니핑
-도청 같은 경우를 말하며 전기 신호를 이용해 분석하는 일을 말한다.

프리미스큐어스 모드
-모든 패킷을 스니퍼에게 넘겨주는 것이다.

TCP Dump
-스니핑 툴로 , 법적효력이 있다.

Fragrouter
-스니핑을 보조해주는 툴로 받은 패킷들을 기존 송신자에게 정상적으로 전달하는 역할이다.

Dsniff
-스니핑 패키지 툴이고 암호화된 계정과 패스워드까지 읽을 수 있다.

스위치는 각 장비의 MAC주소를 확인하여 포트를 할당하므로 자신에게 향하지 않는 패킷 외에는 받을수가 없어서 스니핑을 막을수있다.

ARP 리다이렉트 ,스푸핑VVVVVVV
-공격자가 자신을 라우터라고 속이는 것이다
-원래 라우터의 MAC주소를 알아야하고, 받은 모든 패킷들은 다시 라우터로 릴레이 해주어야한다.
-ARP 리다이렉트는 모든 호스트 vs 라우터공격이고, ARP 스푸핑은 호스트 vs 호스트공격이다.

ICMP 리다이렉트 공격
-공격자가 라우터 B가 되어 ICMP 리다이렉트 패킷도 호스트 A에 보낸 후 라우터 A에 다시 릴레이 시켜주면 모든 패킷을 스니핑할 수 있다.

스위치 재밍
-스위치의 MAC 테이블을 위한 캐시 공간에 버퍼 오버 플로우 공격을 수행한다.
-최근에는 연산장치의 캐시와 MAC테이블 캐시가 독립적이라 통하지 않는다.

스푸핑 공격 대비책
-관리하는 시스템의 MAC주소를 확인하여 테이블로 만들어 둔다.
-arp -a(MAC주소 테이블 명령어)로 현재 IP주소 값과 MAC주소의 대칭값을 비교하여 잘못 맵핑되어있는 항목이 있는지 확인한다.

ARP스푸핑
-사용자에게 특정 IP의 MAC주소 자신의 것으로 속이는 것이다.

IP스푸핑VVVVVVV
- 트러스트 : 시스템에 접속할 때 자신의 IP주소로 인증하면 로그인 없이 접속이 가능하게 만든 것
-이러한 방법의 취약점을 이용하여 IP주소를 속이는 것

IP스푸핑 진행과정 : 원격지에서의 IP스푸핑
1. 공격자는 클라이언트에 TCP SYN Flooding공격을 한다.
2. 공격자는 클라이언트의 IP로 서버에 연결 요청한다.
3. 서버는 클라이언트에서 온 패킷인 줄 알고, 클라이언트에게 SYN/ACK패킷을 전송한다.
4. 공격자는 클라이언트에서 ACK패킷을 보낸것 처럼 패킷을 보내서 속인다.

IP스푸핑 진행과정 : 내부 네트워크에서의 IP스푸핑
1. 공격자가 서버로 ARP Cache Poisioning공격을 한다.
2. 서버에게 SYN패킷을 전송한다.
3. ARP공격으로 인해 공격자에게 SYN/ACK패킷을 전달한다.

대응방안VVVVVVV
-트러스트를 사용하지 않는다.
-사용해야 한담면 트러스트된 시스템의 MAC주소를 static으로 지정한다.

ARP 스푸핑 공격
-사용자 A의 Arp table에 있는 사용자 B의 IP/Mac Address를 Mac만 공격자의 Mac Address로 변경하여
B로 가는 패킷을 공격자가 받아서 릴레이 시켜주는 것

fragrouter : 패킷이 원래 목적한 곳으로 가도록 패킷 릴레이 작동시킨다.

Ping of Death
-ICMP 패킷을 최대 길이로 설정
-전송을 하기 위해서 적절한 크기로 패킷을 자동 분할

DoS(Denial of Service)
-공격 대상이 수용할 수 있는 능력 이상의 정보를 제공하거나 사용자 또는 네트워크 용량을 초과시켜
정상적으로 작동하지 못하게 하는 공격

DoS공격 특징
-파괴공격 : 디스크,데이터,시스템 파괴
-시스템 자원 고갈 공격 : CPU,메모리
-네트워크 자원 고갈 공격 : 쓰레기 데이터로 네트워크 대역폭을 고갈시킨다.
-주로 UDP,ICMP프로토콜을 사용한다.
-공격 시, 위조된 큰 크기의 패킷으로 구성하며, Source IP를 위조한다.

-SYN Flooding : 서버별로 한정되어 있는 접속 가능 공간에 존재하지 않는 클라이언트가 접속한 것처럼 속여 
다른 사용자가 서비스를 제공받지 못하게 하는 것.
hping3사용하여 수행한다.
1. 공격자가 많은 숫자의 SYN패킷을 서버에 보낸다.
2. 서버는 받은 SYN패킷에 대해 SYN/ACK패킷을 각 클라이언트로 보낸다.
3. 서버는 보낸 SYN/ACK패킷에 대한 ACK를 받지 못한다.
4. 서버는 세션의 연결을 기다리게 된다.

SYN Flooding 보안 대책
1.시스템 패치 업데이트
2. 침입 탐지 시스템 및 침입 차단 시스템 설치
3. 짧은 시간 안에 똑같은 형태의 패킷을 보내는 공격을 인지하면, 그에 해당하는 IP주소 대역의 접속을 금지하거나
방화벽, 라우터에서 해당 접속을 금지시킨다.

UDP Flooding
-비연결형 프로토콜인 UDP를 사용하여 UDP패킷은 수신자 측에서 검증 절차가 없기 때문에 
공격자는 패킷의 크기, Source IP를 모두 위조 할 수 있어 추적하는 것이 제한적이다.
-패킷의 크기를 키우기 위해 패킷의 데이터가 쓰레기 값들로 이루어져있다.
-패킷의 크기가 일정하다.
-보통 80번 포트인 HTTP를 공격한다.

UDP Flooding 대응방안
1. 충분한 대역폭 확보 : 공격 트래픽보다 더 큰 규모의 회선 대역폭을 확보
2. 미사용 프로토콜 필터링 : 회사에서 사용하는 네트워크와 서비스 구조에 따라 UDP를 이용하는 포트를 차단
3. 위조된 IP 차단 : 공인 IP로 사용될 수 없는 형식의 IP들을 방화벽으로 차단
4. 패킷 크기 기반 차단 : 특정 크기 이상의 UDP패킷을 차단
5. Ingress 필터링 및 Egress 필터링 : 연결된 라우터 간에 사용하는 IP 대역 정보를 알고있기 때문에 Source IP가 상대방 라우터
에서 사용 가능한 대역인지 파악 후 차단하는 기능

7계층 DoS공격의 특징
-변조된 IP가 아닌 정상 IP를 이용하여 탐지가 어렵다.
-소량의 트래픽을 이용하여 오랜시간 공격이 진행되어 탐지가 어렵다.

웹어플리케이션에 대한 DoS 공격 유형
-HTTP GET Flooding공격 : TCP로 정상적으로 접속한 뒤 HTTP의 GET Method를 통해 특정 페이지를 무한대로 실행
-HTTP CC공격 : 웹 서버가 캐시를 사용하지 않고 응답하게 하는 공격
-동적 HTTP Request Flooding공격 : 요청 페이지를 변경하여 웹 페이지를 지속적으로 요청
-Slow HTTP Header Dos공격 : 서버로 전달할 HTTP메세지의 Header정보를 비정상적으로 조작하여 웹서버가 헤더 정보를
완전히 수신할 때까지 연결을 유지시키는 공격 , 불안전한 메시지를 수신했기 때문에 로그가 남지 않는다.
-Slow HTTP Post공격: 웹서버와의 연결을 장시간 유지하여 웹서버가 정상적인 이용자의 접속을 받아들일 수 없게한다.

DDoS
-DoS공격이 발전된 것, 대응이 어렵다.

DDoS 기본 구성
공격자 : 공격을 주도하는 해커의 컴퓨터
마스터 : 공격자에게 직접 명령을 받는 시스템, 여러대의 에이전트를 관리
핸들러 프로그램 : 마스터 시스템 역할을 수행하는 프로그램
에이전트 : 공격 대상에 직접 공격을 가하는 시스템
데몬 프로그램 : 에이전트 시스템 역할을 수행하는 프로그램

DDoS 진행과정
1. 관리자 계정을 획득하고, 스니핑이나 버퍼 오버플로우등의 공격으로 루트 권한을 획득한다.
2. 네트워크 스캐닝으로 취약한 서비스를 제공하는 서버를 파악한다.
3. 실제 공격을 위한 Exploit을 작성한다.
4. 권한을 획득한 시스템에 침투하여 Exploit을 컴파일 하여 설치한 뒤 공격한다.
================================================================================
스캐닝 공격
-공격자가 모든 포트가 열려있는지 닫혀있는지 파악하기 위해 하는 공격
-Source IP가 모두 동일하다.

TCP Open 스캔
-TCP를 이용한 가장 기본적인 스캔

포트가 열린 경우 SYN, SYN+ACK, ACK 수행
포트가 닫힌 경우 SYN, RST+ACK 수행

스텔스 스캔
특징 : 포트가 열린경우 응답이 없고, 닫힌경우 RST패킷이 돌아온다.
FIN 스캔 : FIN 플래그를 설정하여 보낸 패킷
NULL 스캔 : 플래그 값을 설정하지 않고 보낸 패킷
XMAS 스캔 : ACK, FIN, RST ,SYN 플래그 모두를 설정하여 보낸 패킷

UDP스캔
-포트가 열린경우 서버가 아무것도 보내지 않지만, 닫혀있는 경우 ICMP unreachable패킷을 보낸다.

===================================================================================
대역폭 공격

ICMP Flooding
-ICMP는 인터넷 환경에서 오류에 관한 처리를 지원하는 역할 ex) ping
-패킷의 크기를 키우기 위해 패킷의 데이터가 쓰레기 값들로 이루어져있다.
-패킷의 크기가 일정하다.
-Source IP가 랜덤하다.

ICMP Flooding 대응 방안
1. 충분한 대역폭 확보 : 공격 트래픽보다 더 큰 규모의 회선 대역폭을 확보
2. 위조된 IP 차단 : 공인 IP로 사용될 수 없는 형식의 IP들을 방화벽으로 차단
3. 패킷 크기 기반 차단 : ICMP 크기를 네트워크에 따라 적절한 임계치를 적용하여 차단
4. 미사용 프로토콜 필터링 : ICMP는 헬스 체크의 목적으로만 사용하기 때문에 가능하다.

Reflection Attack
-인터넷에서 UDP 서비스를 사용하는 서버들을 매개체로 이용하여 DDos를 발생시키는 공격 네트워크 대역폭을 고갈시키는 공격
-요청 패킷과 응답 패킷의 형상이 반사되는 형태를 보이며 증폭되는 형태를 보이기때문에 증폭공격이라고도 한다.
-매개체 서버, 공격 대상 서버가 피해자

진행과정
1. 공격자가 C&C를 이용하여 좀비 PC들에게 공격명령 전송
2. 많은 좀비 PC들이 Source IP를 공격 대상의 IP로 위조하고 특정 매개체가 되는 서버들로 UDP요청 패킷들을 전송
3. 요청 패킷을 수신한 매개체 서버들이 공격 대상이 되는 IP로 대량의 응답 패킷들을 전송

공격 대상 입장 특징
- 대부분 UDP 프로토콜로 구성된다.
- 대량의 패킷들은 응답 패킷이다.
- 출발지 포트 정보를 통해 어떤 UDP 서비스 서버가 매개체로 사용된 것인지 알 수 있다.

매개체 입장 특징
- 운영중인 UDP서비스로 많은 요청 패킷이 발생
- 출발지 IP는 1-2개로 적음
- 목적지 포트는 매개체 서버에서 운영중인 UDP 서비스의 포트 번호

반사공격 종류
1. DNS 반사공격
-큰 응답값을 만들기 위해서 DNS 레코드를 TXT 또는 ANY형태로 질의해야한다.
-DNS는 응답 크기가 512bytes를 초과하면 TCP로 전환되는 특징이 있지만 공격자는 위조된 Source IP를 사용하고 있기 때문에
TCP로 재질의를 할 수 없기 때문에 큰 응답사이즈를 가진 도메인 Auth DNS서버를 준비한다.

DNS 반사공격 진행과정
1. 공격자가 C&C를 이용하여 좀비 PC들에게 공격명령 전송
2. 좀비 PC들은 출발지 IP 주소를 공격 대상 IP주소로 위조하여 다수의 캐싱 DNS에게 DNS질의 수행(ANY나 TXT사용)
3. 캐싱 DNS에서 사전에 캐싱되어 있지 않은 도메인이면, 캐싱 DNS는 Auth DNS에게 질의 하여 캐싱 수행
4. +bufsize나 +ignore옵션이 사용되어 패킷 크기가 크더라도 UDP로 유지되어 공격 대상에게 공격 수행

공격 대상 입장 대응 방법
1. 미사용 프로토콜 차단 : 운영중인 네트워크 내에서 UDP를 사용하지 않는다면 전면 차단
2. Auth DNS가 공격 대상일 경우, 수신하는 응답 패킷 차단 : resolv.conf에 설정된 IP주소를 제외한 모든 DNS응답 패킷을 차단

매개체 입장 대응 방법
1.ANY , TXT같은 레코드는 거의 사용되지 않기 때문에, 사용하지 않을 경우 전면 차단하거나 임계치 초과 시 차단하도록 설정

2.SSDP 반사 공격
-IoT기기를 매개체로 하는 반사 공격이며 UPnP기능을 사용한다.

UPnP : 네트워크에 특정 기기를 추가할 때 네트워크 상에서 추가된 기기를 자동으로 인식하게 도와주는 기능
SSDP는 네트워크 상에서 서비스나 정보를 찾기 위한 프로토콜이고, UDP프로토콜과 1900번 포트를 사용한다.
SSDP는 UDP에 속해 있지만, 헤더 구조상에 HTTP프로토콜이 사용되는 특이한 구조를 가지고 있다.

SSDP 반사공격 진행과정
1. 공격자가 C&C를 이용하여 좀비 PC들에게 공격명령 전송
2. 좀비 PC들은 출발지 IP를 공격 대상의 IP로 위조하여 수많은 UPnP기기들을 매개체로 M-SEARCH를 이용한 요청 값을 전송
3. M-SEARCH를 수신한 기기들은 응답 값을 공격 대상에게 전송하여 네트워크 대역폭을 고갈시킨다.

SSDP 반사 공격 특징
-UDP를 사용한다
-출발지 포트가 1900번이다
-출발지 IP주소들은 실제 UPnP기기들이다.
-공격 대상이 수신한 응답 패킷은 UDP임에도 HTTP/1.1 200 OK라는 값이 사용된다. => SSDP가 HTTPU에 속하기 때문이다.
-Location 헤더에 실제 기기의 세부정보를 보여주는 링크가 포함된다.

공격 대상 입장 대응 방법
1. 운영중인 네트워크에서 UPnP기기들이 사용되지 않는다면 출발지 포트가 1900번인 UDP패킷을 차단한다.
2. UDP임에도 HTTP/1.1 200 OK를 포함한 패킷을 시그니쳐로 등록하여 차단한다.

매개체 입장 대응 방법
1. 공인 IP주소로 설정되어 사용하는 기기들을 사설 IP로 변경하여 사용한다.
2. UPnP기능을 사용하지 않는 기기들은 기기들의 설정화면을 제공하지 않도록 비활성화 한다.

===================================================================================
시각화 전략
-사용자 : 실제 이용자를 대상으로 시각화를 해야한다.
-통계 그래프 기법
-기술적 고려사항 : 의사결정이 쉽도록 많은 양의 트래픽 또는 로그들을 전반적으로 표현한다.

공격관련 중요변수
1. Source Destination IP 주소
2. 목적지 포트번호
3. 패킷의 평균 크기
4. TCP헤더의 플래그 및 IP헤더의 프로토콜 필드

시각화의 장점
-많은 양의 정보를 종합적으로 해석 가능
-빠르게 상황을 인식할 수 있다.

utmp로그
-utmp데몬을 사용하여 파일에 로그를 남긴다.
-who,w같은 명령어를 사용하여 로그를 출력한다.

w : 현재 시스템에 로그인된 사용자 계정과 로그인 셸종류, 로그인 시간 등을 나타낸다.
who : 접속한 시스템의 IP확인

wtmp로그
-wtmp데몬을 사용하여 파일에 로그를 남긴다.
-utmp와 비슷한 역할, 사용자들의 로그인, 로그아웃, 시스템 재부팅 정보 수록
-last명령어를 사용하여 확인 가능

su로그
-권한 변경에 대한 로그
-설정파일 : /etc/default/su

pacct 로그
-시스템에 로그인한 모든 사용자가 수행한 프로그램에 대한 정보를 저장하는 로그
-acctcom 명령으로 확인 가능
-lastcomm : 실행된 날짜 출력

syslog : 시스템의 로그 정보를 대부분 수집하여 로깅
authlog/loginlog : 실패한 로그인 시도에 대한 로깅 수행

시스템 이벤트 로그 : 윈도우 시스템에서 시스템 로그가 이벤트 형식으로 관리됨
=========================================================
BPS : 1초동안 전송할 수 있는 모든 비트의 수